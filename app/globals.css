/* app/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   NÓMADA FANTASMA — PALETA V2 (Aqua + Neon)
   ========================================= */

/* Tema CLARO — “papel de niebla” con mapa visible */
:root {
  --radius: 14px;

  /* Base y texto */
  --background: 218 24% 91%;        /* gris frío suave (menos brillante) */
  --foreground: 223 47% 14%;

  /* Acentos */
  --primary: 189 88% 52%;            /* aqua */
  --primary-foreground: 223 47% 8%;
  --accent: 268 83% 66%;             /* violeta neón armónico */
  --accent-foreground: 223 47% 8%;

  /* Superficies */
  --card: 218 24% 97%;
  --card-foreground: 223 47% 14%;
  --border: 220 16% 78%;
  --muted: 220 18% 96%;
  --muted-foreground: 223 12% 38%;

  /* Mapa (CLARO) */
  --grid-line: 215 20% 36%;
  --map-grid-opacity: .22;       /* rejilla */
  --map-contour-aqua: .16;       /* curvas aqua */
  --map-contour-accent: .12;     /* curvas violeta */
  --map-overlay-opacity: .56;    /* presencia total del mapa */
  --map-vignette: .18;           /* viñeta */
  --paper-noise: .03;            /* grano */
}

/* Tema OSCURO — “noche” con mapa notorio */
.dark {
  --background: 223 45% 9%;         /* casi negro azulado */
  --foreground: 210 40% 96%;

  --primary: 189 92% 56%;
  --primary-foreground: 223 47% 8%;
  --accent: 268 90% 68%;
  --accent-foreground: 223 47% 8%;

  --card: 223 43% 12%;
  --card-foreground: 210 40% 96%;
  --border: 220 26% 20%;
  --muted: 223 33% 12%;
  --muted-foreground: 215 20% 70%;

  /* Mapa (OSCURO) */
  --grid-line: 215 18% 70%;
  --map-grid-opacity: .18;
  --map-contour-aqua: .18;
  --map-contour-accent: .14;
  --map-overlay-opacity: .62;
  --map-vignette: .36;
  --paper-noise: .055;
}

/* =========================================
   Base / Reset
   ========================================= */
@layer base {
  *, *::before, *::after { @apply border-border; }

  html {
    -webkit-tap-highlight-color: transparent;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-background text-foreground antialiased;
    /* Fondo que RESPONDE al tema */
    background-image:
      radial-gradient(60% 40% at 25% 5%, hsl(var(--primary) / 0.10), transparent 55%),
      radial-gradient(40% 30% at 80% 0%, hsl(var(--accent) / 0.08), transparent 70%),
      linear-gradient(180deg, hsl(var(--background)), hsl(var(--background)));
    background-attachment: fixed;
    min-height: 100dvh;
  }

  /* Tipografía base (Inter desde layout) */
  h1 { @apply text-4xl sm:text-5xl md:text-6xl font-semibold tracking-tight; }
  h2 { @apply text-2xl sm:text-3xl font-semibold tracking-tight; }
  h3 { @apply text-xl sm:text-2xl font-medium; }

  a { @apply transition-opacity hover:opacity-90; }

  ::selection { background: hsl(var(--primary) / 0.25); color: hsl(var(--foreground)); }

  /* Scrollbar (WebKit) */
  *::-webkit-scrollbar { width: 10px; height: 10px; }
  *::-webkit-scrollbar-thumb {
    background: hsl(215 16% 35% / 0.6);
    border-radius: 9999px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }
  *::-webkit-scrollbar-track { background: transparent; }

  /* Accesibilidad: ring consistente */
  :focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px hsl(var(--primary) / 0.35);
    border-radius: 10px;
  }
}

/* Reduce motion si el usuario lo prefiere */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}

/* =========================================
   Component Primitives
   ========================================= */
@layer components {
  /* Superficies con glassmorphism */
  .card-glass {
    @apply bg-card/60 backdrop-blur-xs border rounded-2xl;
    box-shadow:
      0 1px 0 0 hsl(0 0% 100% / 0.05) inset,
      0 10px 20px hsl(222 47% 8% / 0.35);
  }

  /* Pastillas (navbar, badges, etc.) */
  .pill { @apply rounded-2xl border bg-card/40 px-3 py-1 text-sm; }

  /* Botonera base */
  .btn { @apply inline-flex items-center gap-2 rounded-2xl px-4 py-2 text-sm font-medium border transition-all select-none; }

  /* Botón principal AQUA con brillo controlado */
  .btn-primary {
    @apply btn text-[hsl(var(--primary-foreground))] border-0;
    background-image: linear-gradient(180deg, hsl(var(--primary)), hsl(187 92% 44%));
    box-shadow: 0 0 0 1px hsl(var(--primary) / 0.30), 0 8px 28px hsl(var(--primary) / 0.22);
  }

  /* Botón fantasma */
  .btn-ghost {
    @apply btn bg-card/55 text-foreground border-border;
    box-shadow:
      0 1px 0 0 hsl(0 0% 100% / 0.05) inset,
      0 8px 20px hsl(222 47% 8% / 0.25);
  }

  /* CTA grande (para hero) */
  .btn-cta {
    @apply inline-flex items-center justify-center gap-2 rounded-3xl px-5 py-3 text-base font-medium border-0;
    background-image: linear-gradient(180deg, hsl(var(--primary)), hsl(187 92% 44%));
    color: hsl(var(--primary-foreground));
    box-shadow: 0 0 0 1px hsl(var(--primary) / 0.30), 0 10px 36px hsl(var(--primary) / 0.25);
  }
  .btn-cta:active { transform: translateY(1px); }
}

/* =========================================
   Utilities
   ========================================= */
@layer utilities {
  /* Base del Hero por tema */
  .hero-halo {
    background:
      radial-gradient(120% 120% at 12% -5%, hsl(var(--primary) / 0.42), transparent 46%),
      radial-gradient(80% 60% at 88% -10%, hsl(var(--accent) / 0.18), transparent 58%),
      linear-gradient(180deg, hsl(var(--background)), hsl(var(--background)));
  }

  /* Sombra/borde interno suave */
  .fade-border { box-shadow: inset 0 0 0 1px hsl(0 0% 100% / 0.06); }

  /* Gradiente “fantasma” genérico */
  .ghost-gradient {
    background:
      radial-gradient(80% 60% at 50% 0%, hsl(var(--primary) / 0.12), transparent 55%),
      linear-gradient(180deg, hsl(var(--background) / 0.00), hsl(var(--background) / 0.6));
  }

  /* Glow AQUA controlado (para botones/links destacados) */
  .glow-aqua { box-shadow: 0 0 0 1px hsl(var(--primary) / 0.35), 0 10px 36px hsl(var(--primary) / 0.25); }

  /* Borde neón sutil (pills activas) */
  .neon-border { box-shadow: inset 0 0 0 1px hsl(var(--primary) / 0.45); }

  /* Texto degradado aqua → violeta */
  .text-neon-gradient {
    background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--accent)));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  /* Suavidad al pasar el cursor sobre superficies */
  .surface-hover { transition: background-color 180ms ease, box-shadow 180ms ease, opacity 180ms ease; }

  /* === Superficie de “mapa” visible en ambos temas === */
  .map-surface { position: relative; z-index: 0; overflow: hidden; }

  /* Capa de rejilla + curvas (debajo del contenido) */
  .map-surface::before {
    content: "";
    position: absolute;
    inset: -1px;
    pointer-events: none;
    z-index: 0;

    background-image:
      /* grid (usa token y opacidad por tema) */
      linear-gradient(to bottom, hsl(var(--grid-line) / var(--map-grid-opacity)) 1px, transparent 1px),
      linear-gradient(to right,  hsl(var(--grid-line) / var(--map-grid-opacity)) 1px, transparent 1px),
      /* contours: aqua + accent */
      repeating-radial-gradient(circle at 18% 28%, transparent 0 14px, hsl(var(--primary) / var(--map-contour-aqua)) 14px 16px),
      repeating-radial-gradient(circle at 82% 12%, transparent 0 20px, hsl(var(--accent) / var(--map-contour-accent)) 20px 22px);

    background-size: 24px 24px, 24px 24px, 220px 220px, 320px 320px;
    background-repeat: repeat, repeat, no-repeat, no-repeat;
    background-position: center center, center center, 10% 0%, 85% 0%;

    -webkit-mask-image: radial-gradient(160% 120% at 50% -10%, black 55%, transparent 85%);
            mask-image: radial-gradient(160% 120% at 50% -10%, black 55%, transparent 85%);

    opacity: var(--map-overlay-opacity);
  }

  /* Capa de “papel” + viñeta/grano (encima del mapa, debajo del contenido) */
  .map-surface::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    background:
      /* grano fino */
      repeating-linear-gradient( 0deg,  hsl(0 0% 100% / var(--paper-noise)) 0 2px, transparent 2px 4px),
      repeating-linear-gradient(90deg,  hsl(0 0% 100% / var(--paper-noise)) 0 2px, transparent 2px 4px),
      /* viñeta */
      radial-gradient(140% 80% at 50% 0%, transparent 55%, hsl(0 0% 0% / var(--map-vignette)) 100%);
    mix-blend-mode: multiply;
    border-radius: inherit;
  }

  /* Ajustes móviles: menos densidad/opacidad */
  @media (max-width: 640px) {
    .map-surface::before {
      background-size: 32px 32px, 32px 32px, 260px 260px, 360px 360px;
      opacity: calc(var(--map-overlay-opacity) - .06);
    }
    .map-surface::after {
      background:
        repeating-linear-gradient( 0deg,  hsl(0 0% 100% / calc(var(--paper-noise) + .01)) 0 2px, transparent 2px 4px),
        repeating-linear-gradient(90deg,  hsl(0 0% 100% / calc(var(--paper-noise) + .01)) 0 2px, transparent 2px 4px),
        radial-gradient(140% 80% at 50% 0%, transparent 55%, hsl(0 0% 0% / calc(var(--map-vignette) + .06)) 100%);
    }
  }
}
